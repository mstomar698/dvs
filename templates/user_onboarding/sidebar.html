{% load customrailmadad %}
<style>

    .active{
        background-color: #448aff;
        /* pointer-events: none; */
    }

    .mx-4{
        margin: 0px !important;
        padding:0px 125px 0px 0px;
    }
    .mx-4 li{
        padding:0px 0px 0px 23px;
    }
</style>
<nav class="pcoded-navbar">
    <div class="sidebar_toggle">
        <a href="#"><i class="icon-close icons"></i></a>
    </div>
    <div class="pcoded-inner-navbar main-menu">
        <div class="mt-3">
            <!-- <div class="main-menu-header" style="">
                <div class="container mx-0">
                    <div class="img-radius" id="img-radius" width=>
                    </div>
                    <div class="user-details">
                        <span id="more-details" style="font-size:1.1rem">{{request.user.username}}<i class="fa fa-caret-down" style="font-size:0.9rem"></i></span>
                    </div>
                </div>

                <div class="main-menu-content">
                    <ul>
                        <li class="more-details">
                            <hr style="margin:0;padding:0">
                            <a href="/auth/user_profile" style="color:white"><i class="ti-user"></i>View Profile</a>
                            <hr style="margin:0;padding:0">

                            <a href="/logout" style="color:white"><i class="ti-layout-sidebar-left"></i>Logout</a>
                        </li>
                    </ul>
                </div>
</div> -->
            <br />
            <br />
            <!-- <ul class="pcoded-item pcoded-left-item">
                <li>
                    <a href="/railmadad/" class="waves-effect waves-dark">
                        <span class="pcoded-micon"></span>
                        <span class="pcoded-mtext" data-i18n="nav.form-components.main">Railmadad</span>
                        <span class="pcoded-mcaret"></span>
                    </a>
                </li>
            </ul>
            <ul class="pcoded-item pcoded-left-item">
                <li>
                    <a href="/cmm/" class="waves-effect waves-dark">
                        <span class="pcoded-micon"></span>
                        <span class="pcoded-mtext" data-i18n="nav.form-components.main">Cmm</span>
                        <span class="pcoded-mcaret"></span>
                    </a>
                </li>
            </ul> -->
            <ul class="pcoded-item pcoded-left-item">
                <li>
                    <a href="/auth/user_profile" class="waves-effect waves-dark">
                        <span class="pcoded-micon"></span>
                        <span class="pcoded-mtext" data-i18n="nav.form-components.main">User Profile</span>
                        <span class="pcoded-mcaret"></span>
                    </a>
                </li>
            </ul>
            <ul class="pcoded-item pcoded-left-item">
                <li>
                    <a href="/api/pms/v1/home/" class="waves-effect waves-dark">
                        <span class="pcoded-micon"></span>
                        <span class="pcoded-mtext" data-i18n="nav.form-components.main">PMS</span>
                        <span class="pcoded-mcaret"></span>
                    </a>
                </li>
            </ul>
            {% if request.user|has_group:'Railway Admin' %}
                <ul class="pcoded-item pcoded-left-item">
                    <li>
                        <a href="/auth/show_user_requested" class="waves-effect waves-dark">
                            <span class="pcoded-micon"></span>
                            <span class="pcoded-mtext" data-i18n="nav.form-components.main">User Requests</span>
                            <span class="pcoded-mcaret"></span>
                        </a>
                    </li>
                </ul>
            {% endif %}
        </div>
    </div>
</nav>
<script>
    $(document).ready( function() {
        var window_path
        var entered =0
        if(window.location.pathname.trim().split("/").slice(-1)[0]){
            window_path = window.location.pathname.split("/").slice(-1)[0]
        }
        else{
            window_path = window.location.pathname.split("/").slice(-2)[0]
        }
        var array1 = $("details").children(".mx-4")
        for(var i=0; i<array1.length; i++){
            var array2=array1[i].childNodes
            for(var j=0; j<array2.length; j++){
                var array3=array2[j].childNodes
                if(array3[1]){
                    if(array3[1].href.split("/").slice(-1)[0]==window_path){
                        $(array3[1]).parent().addClass("active-small");
                        entered=1
                    }
                }
            }
        }

        if(entered!=1){
            console.log("entered2")
            var array1 = $("div").children(".pcoded-left-item")
            for(var i=0; i<array1.length; i++){
                var array2=array1[i].childNodes
                for(var j=0; j<array2.length; j++){
                    var array3=array2[j].childNodes
                    if(array3[1]){
                        var window_path
                        if(window.location.pathname.trim().split("/").slice(-1)[0]){
                            window_path = window.location.pathname.split("/").slice(-1)[0]
                        }
                        else{
                            window_path = window.location.pathname.split("/").slice(-2)[0]
                        }
                        if(array3[1].href.split("/").slice(-1)[0]==window_path){
                            $(array3[1]).parent().addClass("active");
                        }
                    }
                }
            }
        }
    });
</script>
