{% load customrailmadad %}
<style>
    .active-small{
        background-color: #448aff;
        color: white;
        pointer-events: none;
    }

    .active-small a{
        color: white;
        text-decoration: none;
    }

    .active{
        background-color: #448aff;
        /* pointer-events: none; */
    }

    .mx-4{
        margin: 0px !important;
        padding:0px 125px 0px 0px;
    }
    .mx-4 li{
        padding:0px 0px 0px 23px;
    }
    .upload-download{
        padding: 0px 7px 0px 0px !important ;
    }
</style>
<nav class="pcoded-navbar">
    <div class="sidebar_toggle">
        <a href="#"><i class="icon-close icons"></i></a>
    </div>
    <div class="pcoded-inner-navbar main-menu">
        <div class="mt-3">
            <!-- <div class="main-menu-header" style="">
                <div class="container mx-0">
                    <div class="img-radius" id="img-radius" width=>
                    </div>
                    <div class="user-details">
                        <span id="more-details" style="font-size:1.1rem">{{request.user.username}}<i class="fa fa-caret-down" style="font-size:0.9rem"></i></span>
                    </div>
                </div>

                <div class="main-menu-content">
                    <ul>
                        <li class="more-details">
                            <hr style="margin:0;padding:0">
                            <a href="/auth/user_profile" style="color:white"><i class="ti-user"></i>View Profile</a>
                            <hr style="margin:0;padding:0">

                            <a href="/logout" style="color:white"><i class="ti-layout-sidebar-left"></i>Logout</a>
                        </li>
                    </ul>
                </div>
</div> -->
            <div class="pcoded-navigation-label" data-i18n="nav.category.forms">Charts</div>
            <ul class="pcoded-item pcoded-left-item" style="width: 150%;">
                <details open>
                    <summary class="mx-2">Feedback</summary>
                    <div class="mx-4">
                        <li class="rating-item">
                            <a href="/railmadad/trend_rating" class="waves-effect waves-dark">
                                <span data-i18n="nav.dash.main">Rating Pattern</span>
                            </a>
                        </li>
                        <li class="rating-item">
                            <a href="/railmadad/rating" class="waves-effect waves-dark">
                                <span data-i18n="nav.dash.main">Summary</span>
                            </a>
                        </li>
                        <li class="rating-item">
                            <a href="/railmadad/rating_percentage" class="waves-effect waves-dark">
                                <span data-i18n="nav.dash.main">Percentage</span>
                            </a>
                        </li>
                    </div>
                </details>
                <details open>
                    <summary class="mx-2">Complaint Pattern</summary>
                    <div class="mx-4">
                        <li class="rating-item">
                            <a href="/railmadad/mix_chart" class="waves-effect waves-dark">
                                <span data-i18n="nav.dash.main">Train Number Wise Complain</span>
                            </a>
                        </li>
                        <li class="rating-item">
                            <a href="/railmadad/mix_coach_graph" class="waves-effect waves-dark">
                                <span data-i18n="nav.dash.main">Coach Number Wise Complain</span>
                            </a>
                        </li>
                    </div>
                </details>
                <details open>
                    <summary class="mx-2">Disposal Time</summary>
                    <div class="mx-4">
                        <li>
                            <a href="/railmadad/disposal_time_date_wise"
                               class="waves-effect waves-dark">
                                <span data-i18n="nav.dash.main">Date Wise</span>
                            </a>
                        </li>
                        <li>
                            <a href="/railmadad/disposal_time_train_wise"
                               class="waves-effect waves-dark">
                                <span data-i18n="nav.dash.main">Train Number Wise</span>
                            </a>
                        </li>
                        <li>
                            <a href="/railmadad/disposal_time_coach_wise"
                               class="waves-effect waves-dark">
                                <span data-i18n="nav.dash.main">Coach Number Wise</span>
                            </a>
                        </li>
                        <li>
                            <a href="/railmadad/disposal_time_sub_type_wise"
                               class="waves-effect waves-dark">
                                <span data-i18n="nav.dash.main">Sub Type Wise</span>
                            </a>
                        </li>
                    </div>
                </details>
                <details open>
                    <summary class="mx-2">Maximum Complain In:-</summary>
                    <div class="mx-4">
                        <li>
                            <a href="/railmadad/staff_graph" class="waves-effect waves-dark">
                                <span data-i18n="nav.form-components.main">Maximum Complain of Staff</span>
                            </a>
                        </li>
                        <li>
                            <a href="/railmadad/max_complain_train" class="waves-effect waves-dark">
                                <span data-i18n="nav.form-components.main">Maximum Complain in Train</span>
                            </a>
                        </li>
                        <li>
                            <a href="/railmadad/max_complain_coach" class="waves-effect waves-dark">
                                <span data-i18n="nav.form-components.main">Maximum Complain in Coach</span>
                            </a>
                        </li>
                    </div>
                </details>
                <details open>
                    <summary class="mx-2">Miscellaneous</summary>
                    <div class="mx-4">
                        <li>
                            <a href="/railmadad/trend" class="waves-effect waves-dark">
                                <span data-i18n="nav.form-components.main">Trends Chart</span>
                            </a>
                        </li>
                        <li>
                            <a href="/railmadad/complain_type_absolute_percentage"
                               class="waves-effect waves-dark">
                                <span data-i18n="nav.dash.main">Complain Type & Absolute %</span>
                            </a>
                        </li>
                        <li>
                            <a href="/railmadad/train_summary_table" class="waves-effect waves-dark">
                                <span data-i18n="nav.form-components.main">Train Summary Table</span>
                            </a>
                        </li>
                        <li>
                            <a href="/railmadad/coach_summary_table" class="waves-effect waves-dark">
                                <span data-i18n="nav.form-components.main">Coach Summary Table</span>
                            </a>
                        </li>
                    </div>
                </details>
            </ul>
        </ul>
    </li>
</ul>
</div>
{% if request.user|has_group:'Moderator' %}
    <div class="pcoded-navigation-label" data-i18n="nav.category.forms">Upload/Update data</div>
    <ul class="pcoded-item pcoded-left-item upload-download">
        <li>
            <a href="/railmadad/data_upload"
               id="data-upload-click"
               class="waves-effect waves-dark">
                <span class="pcoded-micon"><i class="fa fa-file"></i><b>FC</b></span>
                <span class="pcoded-mtext" data-i18n="nav.form-components.main">Upload
                data</span>
                <span class="pcoded-mcaret"></span>
            </a>
        </li>
        <li>
            <a href="/railmadad/old_data_upload"
               id="data-upload-click"
               class="waves-effect waves-dark">
                <span class="pcoded-micon"><i class="fa fa-file"></i><b>FC</b></span>
                <span class="pcoded-mtext" data-i18n="nav.form-components.main">Upload Old
                data</span>
                <span class="pcoded-mcaret"></span>
            </a>
        </li>
        <li>
            <a href="/railmadad/download_data_csv"
               id="data-upload-click"
               class="waves-effect waves-dark">
                <span class="pcoded-micon"><i class="fa fa-download"></i><b>FC</b></span>
                <span class="pcoded-mtext" data-i18n="nav.form-components.main">Download
                data</span>
                <span class="pcoded-mcaret"></span>
            </a>
        </li>
        <li>
            <a href="/railmadad/old_download_data_csv"
               id="data-upload-click"
               class="waves-effect waves-dark">
                <span class="pcoded-micon"><i class="fa fa-download"></i><b>FC</b></span>
                <span class="pcoded-mtext" data-i18n="nav.form-components.main">Download Old
                data</span>
                <span class="pcoded-mcaret"></span>
            </a>
        </li>
        <li>
            <a href="/railmadad/show_staff_name" class="waves-effect waves-dark">
                <span class="pcoded-micon"><i class="fa fa-user"></i><b>FC</b></span>
                <span class="pcoded-mtext" data-i18n="nav.form-components.main">Add Staff
                Name</span>
                <span class="pcoded-mcaret"></span>
            </a>
        </li>
        <li>
            <a href="/railmadad/show_physical_coach_number"
               class="waves-effect waves-dark">
                <span class="pcoded-micon"><i class="fa fa-train"></i><b>FC</b></span>
                <span class="pcoded-mtext" data-i18n="nav.form-components.main">Add Coach Number</span>
                <span class="pcoded-mcaret"></span>
            </a>
        </li>
        <li>
            <a href="/railmadad/add_train_cat" class="waves-effect waves-dark">
                <span class="pcoded-micon"><i class="fa fa-plus"></i><b>FC</b></span>
                <span class="pcoded-mtext" data-i18n="nav.form-components.main">Add Train
                Category</span>
                <span class="pcoded-mcaret"></span>
            </a>
        </li>
        <li>
            <a href="/railmadad/create_staff" class="waves-effect waves-dark">
                <span class="pcoded-micon"><i class="fa fa-plus"></i><b>FC</b></span>
                <span class="pcoded-mtext" data-i18n="nav.form-components.main">Create New Staff</span>
                <span class="pcoded-mcaret"></span>
            </a>
        </li>
        <li>
            <a href="/railmadad/add_staff_csv" class="waves-effect waves-dark">
            <span class="pcoded-micon"><i class="fa fa-user"></i>
            <br>
            <b>FC</b></span>
        <span class="pcoded-mtext" data-i18n="nav.form-components.main">Add Staff Name
        by Csv</span>
        <span class="pcoded-mcaret"></span>
    </a>
</li>
{% else %}
{% endif %}
{% if request.user|has_group:'Railway Admin' %}
    <ul class="pcoded-item pcoded-left-item">
        <li>
            <a href="/auth/show_user_requested" class="waves-effect waves-dark">
            <span class="pcoded-micon"><i class="fa fa-user"></i>
            <br>
            <b>FC</b></span>
        <span class="pcoded-mtext" data-i18n="nav.form-components.main">User Requests</span>
        <span class="pcoded-mcaret"></span>
    </a>
</li>
</ul>
{% endif %}
</div>
</ul>
</ul>
</li>
</ul>
</div>
</nav>
<script>
    $(document).ready( function() {
        var window_path
        var entered =0
        if(window.location.pathname.trim().split("/").slice(-1)[0]){
            window_path = window.location.pathname.split("/").slice(-1)[0]
        }
        else{
            window_path = window.location.pathname.split("/").slice(-2)[0]
        }
        var array1 = $("details").children(".mx-4")
        for(var i=0; i<array1.length; i++){
            var array2=array1[i].childNodes
            for(var j=0; j<array2.length; j++){
                var array3=array2[j].childNodes
                if(array3[1]){
                    if(array3[1].href.split("/").slice(-1)[0]==window_path){
                        $(array3[1]).parent().addClass("active-small");
                        entered=1
                    }
                }
            }
        }

        if(entered!=1){
            console.log("entered2")
            var array1 = $("div").children(".pcoded-left-item")
            for(var i=0; i<array1.length; i++){
                var array2=array1[i].childNodes
                for(var j=0; j<array2.length; j++){
                    var array3=array2[j].childNodes
                    if(array3[1]){
                        var window_path
                        if(window.location.pathname.trim().split("/").slice(-1)[0]){
                            window_path = window.location.pathname.split("/").slice(-1)[0]
                        }
                        else{
                            window_path = window.location.pathname.split("/").slice(-2)[0]
                        }
                        if(array3[1].href.split("/").slice(-1)[0]==window_path){
                            $(array3[1]).parent().addClass("active");
                        }
                    }
                }
            }
        }
    });
</script>
